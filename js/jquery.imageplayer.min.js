if(typeof(jQuery)=="undefined"){alert("jQuery library was not found.")}(function(a){a.fn.extend({imagePlayer:function(b){if(b&&typeof(b)=="object"){b=a.extend({},a.imagePlayer.settings,b)}else{b=a.imagePlayer.settings}return this.each(function(){try{new a.imagePlayer(this,b)}catch(c){console.error(c)}})}});a.imagePlayer=function(l,w){var P=w;var t=a(l);var e=[];var L=[];var v=0;var u=null;var N,o,y,x,A,m,d,r,G,n,b,k,E,f=null;var j=0;var R=false;var Q=P.pauseOnHover;var O;var M=0;var I=null;t.find("img").each(function(){e.push(this.src);L.push(this)});if(e.length==0){throw"No images found!"}z();a.each(L,function(i,T){a(T).load(function(){v++;if(v>=e.length){if(P.autoStart===true){S()}else{q(e[0])}D()}})});function z(){N=a("<div>").addClass("img_player");o=a("<div>").addClass("stage");y=a("<div>").addClass("controls");x=a("<a>").attr("href","#").addClass("start");A=a("<a>").attr("href","#").addClass("prev");m=a("<a>").attr("href","#");d=a("<a>").attr("href","#").addClass("next");r=a("<a>").attr("href","#").addClass("end");G=a("<div>").addClass("scrubber");n=a("<a>").attr("href","#");b=a("<a>").attr("href","#").addClass("fullscreen");k=a("<span>").addClass("frame_count");E=a("<div>").addClass("caption");N.css({width:P.stageWidth+"px",height:P.stageHeight+40+"px"});o.css({width:P.stageWidth+"px",height:P.stageHeight+"px"});y.css({width:P.stageWidth+"px"});G.css({width:Math.floor((P.stageWidth-297)/e.length)*(e.length+1)+"px"});(P.autoStart===true)?m.addClass("pause"):m.addClass("play");N.append(o.append(E)).append(y.append(x).append(A).append(m).append(d).append(r).append(G.append(n)).append(b).append(k));t.hide().after(N);O=Math.floor(G.width()/e.length)}function D(){o.bind("mouseenter",function(i){c(i,this)}).bind("mouseleave",function(i){s(i,this)});m.bind("click",function(i){H(i,this)});A.bind("click",function(i){C(i,this)});d.bind("click",function(i){p(i,this)});x.bind("click",function(i){g(i,this)});r.bind("click",function(i){h(i,this)});b.bind("click",function(i){F(i,this)});G.bind("click",function(i){J(i,this)})}function q(T){var i=(R===true)?a(window).innerWidth():P.stageWidth;var V=(R===true)?a(window).innerHeight()-40:P.stageHeight;var U={src:T,alt:"Slide "+M+1,width:i,height:V};if(f===null){f=a("<img>").attr(U);o.append(f)}else{f.attr(U)}K(M+1);k.html(M+1+"/"+e.length)}function K(i){if(P.captions===null||!(i in P.captions)){return}E.html(P.captions[i])}function S(){clearTimeout(I);if(P.loop===true){if(M>e.length-1){M=0;n.stop(true,true);n.css("left","0")}}if(M<e.length){B(e[M])}M++}function B(i){q(i);j=parseFloat(n.css("left"));var T=O*(M+1)-j;n.stop(true,true);n.animate({left:"+="+T+"px"},P.delay*1000,"linear");I=setTimeout(S,P.delay*1000)}function c(T,i){if(Q===true&&m.attr("class")==="pause"){clearTimeout(I);n.stop(true,true)}}function s(T,i){if(Q===true&&m.attr("class")==="pause"){S()}}function H(T,i){T.preventDefault();i=a(i,N);if(i.attr("class")=="pause"){i.attr("class","play");clearTimeout(I);n.stop(true,false);n.css("left",j+"px");M--}else{S();i.attr("class","pause")}}function C(T,i){T.preventDefault();i=a(i,N);clearTimeout(I);n.stop(true,false);M=(M-1<0)?0:M-1;n.css("left",O*M+"px");if(m.attr("class")==="pause"){S()}else{q(e[M])}}function p(T,i){T.preventDefault();i=a(i,N);clearTimeout(I);n.stop(true,false);M=(M+1>e.length-1)?e.length-1:M+1;n.css("left",O*M+"px");if(m.attr("class")==="pause"){S()}else{q(e[M])}}function g(T,i){T.preventDefault();i=a(i,N);clearTimeout(I);n.stop(true,false);M=0;n.css("left","0px");if(m.attr("class")==="pause"){S()}else{q(e[M])}}function h(T,i){T.preventDefault();i=a(i,N);clearTimeout(I);n.stop(true,false);M=e.length-1;n.css("left",M*O+"px");if(m.attr("class")==="pause"){S()}else{q(e[M])}}function F(T,i){T.preventDefault();if(!N.hasClass("full")){R=true;Q=false;N.addClass("full");N.css("width",a(window).innerWidth()+"px");N.css("height",(a(window).innerHeight())+"px");o.css("width",a(window).innerWidth()+"px");o.css("height",(a(window).innerHeight()-40)+"px");f.attr("width",a(window).innerWidth());f.attr("height",a(window).innerHeight()-40);a(N).siblings().filter(":visible").addClass("invisibleimageplayer")}else{R=false;Q=P.pauseOnHover;N.removeClass("full");N.css({width:P.stageWidth+"px",height:P.stageHeight+40+"px"});o.css({width:P.stageWidth+"px",height:P.stageHeight+"px"});f.attr("width",P.stageWidth);f.attr("height",P.stageHeight);a(N).siblings().removeClass("invisibleimageplayer");a("body").scrollTop(N.offset().top)}}function J(V,T){var X,i,U,W;V.preventDefault();T=a(T,N);clearTimeout(I);n.stop(true,false);X=T.offset();i=Math.ceil(V.pageX-X.left);M=Math.floor(i/O);U=Math.abs(O*M-i);W=Math.abs(O*(M+1)-i);if(M<e.length){if(U<=W){n.css("left",(i-U)+"px")}else{n.css("left",(i+W)+"px");if(M<e.length-1){M++}}if(m.attr("class")==="pause"){S()}else{q(e[M])}}}};a.imagePlayer.settings={stageWidth:400,stageHeight:300,autoStart:false,pauseOnHover:true,delay:1,loop:true,captions:null}})(jQuery);